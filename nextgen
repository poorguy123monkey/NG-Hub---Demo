--[[
  Full NextGEN UI Script with:
    • Loading Screen
    • Main UI with tabs (Dashboard, Player, Tools, Settings, Info, Scripts)
    • Scripts tab contains Stat Changer UI allowing player stat modification
--]]

local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")

local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

-- CONFIG COLORS & ANIMATIONS (example values, adjust as needed)
local CONFIG = {
    COLORS = {
        PRIMARY = Color3.fromRGB(0, 170, 255),
        SECONDARY = Color3.fromRGB(0, 120, 200),
        ACCENT = Color3.fromRGB(255, 100, 100),
        BACKGROUND_DARK = Color3.fromRGB(12, 12, 15),
        BACKGROUND_LIGHT = Color3.fromRGB(30, 30, 35),
        BACKGROUND_MEDIUM = Color3.fromRGB(22, 22, 27),
        TEXT_PRIMARY = Color3.fromRGB(230, 230, 230),
    },
    ANIMATIONS = {
        FAST = 0.2,
        MEDIUM = 0.5,
        SLOW = 1,
    },
}

-- Placeholder stub for glow and holo effect functions used in your original script
local function createGlowEffect(instance, color, intensity) 
    -- implement your glow effect or leave empty if already defined elsewhere
end
local function createHolographicEffect(instance)
    -- implement your holo effect or leave empty
    return nil, nil
end
local function createShineEffect(instance, duration)
    -- implement your shine effect or leave empty
end

-- === LOADING SCREEN ===
local loadingScreen = Instance.new("ScreenGui")
loadingScreen.Name = "NextGEN_Loading"
loadingScreen.ResetOnSpawn = false
loadingScreen.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
loadingScreen.Parent = playerGui

local loadingBg = Instance.new("Frame")
loadingBg.Size = UDim2.new(1, 0, 1, 0)
loadingBg.BackgroundColor3 = CONFIG.COLORS.BACKGROUND_DARK
loadingBg.BorderSizePixel = 0
loadingBg.Parent = loadingScreen

local bgGradient = Instance.new("UIGradient")
bgGradient.Rotation = 45
bgGradient.Color = ColorSequence.new{
    ColorSequenceKeypoint.new(0, Color3.fromRGB(5, 5, 5)),
    ColorSequenceKeypoint.new(0.5, Color3.fromRGB(15, 15, 15)),
    ColorSequenceKeypoint.new(1, Color3.fromRGB(8, 8, 8))
}
bgGradient.Parent = loadingBg

local diamondLogo = Instance.new("ImageLabel")
diamondLogo.Size = UDim2.new(0, 150, 0, 150)
diamondLogo.AnchorPoint = Vector2.new(0.5, 0.5)
diamondLogo.Position = UDim2.new(0.5, 0, 0.5, 0)
diamondLogo.BackgroundTransparency = 1
diamondLogo.Image = "rbxassetid://743807897"
diamondLogo.ImageColor3 = CONFIG.COLORS.PRIMARY
diamondLogo.Parent = loadingScreen
diamondLogo.ImageTransparency = 1

createGlowEffect(diamondLogo, CONFIG.COLORS.PRIMARY, 0.6)

local loadingText = Instance.new("TextLabel")
loadingText.Size = UDim2.new(0, 300, 0, 50)
loadingText.AnchorPoint = Vector2.new(0.5, 0.5)
loadingText.Position = UDim2.new(0.5, 0, 0.65, 0)
loadingText.BackgroundTransparency = 1
loadingText.Text = "Loading NextGEN..."
loadingText.Font = Enum.Font.Gotham
loadingText.TextSize = 22
loadingText.TextColor3 = CONFIG.COLORS.PRIMARY
loadingText.TextTransparency = 1
loadingText.TextStrokeTransparency = 0.8
loadingText.TextStrokeColor3 = CONFIG.COLORS.SECONDARY
loadingText.Parent = loadingScreen

local loadingHolo, loadingHoloConnection = createHolographicEffect(loadingText)

local function flashDiamond()
    local fadeIn = TweenService:Create(diamondLogo, TweenInfo.new(1, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut), {ImageTransparency = 0})
    local textFadeIn = TweenService:Create(loadingText, TweenInfo.new(1, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut), {TextTransparency = 0})
    local fadeOut = TweenService:Create(diamondLogo, TweenInfo.new(1, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut), {ImageTransparency = 1})
    local textFadeOut = TweenService:Create(loadingText, TweenInfo.new(1, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut), {TextTransparency = 1})

    fadeIn:Play()
    textFadeIn:Play()
    fadeIn.Completed:Wait()

    createShineEffect(diamondLogo, 0.8)

    wait(0.5)
    fadeOut:Play()
    textFadeOut:Play()
    fadeOut.Completed:Wait()
end

-- === MAIN UI ===
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "NextGEN_UI"
ScreenGui.ResetOnSpawn = false
ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
ScreenGui.Parent = playerGui
ScreenGui.Enabled = false

local MainContainer = Instance.new("Frame")
MainContainer.Size = UDim2.new(0, 900, 0, 600)
MainContainer.Position = UDim2.new(0.5, 0, 0.7, 0)
MainContainer.AnchorPoint = Vector2.new(0.5, 0.5)
MainContainer.BackgroundColor3 = CONFIG.COLORS.BACKGROUND_DARK
MainContainer.BackgroundTransparency = 1
MainContainer.BorderSizePixel = 0
MainContainer.Parent = ScreenGui

local mainCorner = Instance.new("UICorner")
mainCorner.CornerRadius = UDim.new(0, 20)
mainCorner.Parent = MainContainer

local mainStroke = Instance.new("UIStroke")
mainStroke.Color = CONFIG.COLORS.PRIMARY
mainStroke.Transparency = 0.5
mainStroke.Thickness = 2
mainStroke.Parent = MainContainer

local grad = Instance.new("UIGradient")
grad.Rotation = 45
grad.Color = ColorSequence.new{
    ColorSequenceKeypoint.new(0, Color3.fromRGB(15, 15, 15)),
    ColorSequenceKeypoint.new(0.3, Color3.fromRGB(20, 20, 25)),
    ColorSequenceKeypoint.new(0.7, Color3.fromRGB(18, 18, 22)),
    ColorSequenceKeypoint.new(1, Color3.fromRGB(12, 12, 15))
}
grad.Parent = MainContainer

createGlowEffect(MainContainer, CONFIG.COLORS.PRIMARY, 0.8)

local TopBar = Instance.new("Frame")
TopBar.Size = UDim2.new(1, 0, 0, 60)
TopBar.BackgroundColor3 = CONFIG.COLORS.BACKGROUND_LIGHT
TopBar.BorderSizePixel = 0
TopBar.Parent = MainContainer

local topBarCorner = Instance.new("UICorner")
topBarCorner.CornerRadius = UDim.new(0, 20)
topBarCorner.Parent = TopBar

local topBarGrad = Instance.new("UIGradient")
topBarGrad.Rotation = 90
topBarGrad.Color = ColorSequence.new{
    ColorSequenceKeypoint.new(0, Color3.fromRGB(25, 25, 30)),
    ColorSequenceKeypoint.new(1, Color3.fromRGB(15, 15, 20))
}
topBarGrad.Parent = TopBar

local CloseButton = Instance.new("TextButton")
CloseButton.Size = UDim2.new(0, 35, 0, 35)
CloseButton.Position = UDim2.new(1, -47, 0, 12)
CloseButton.BackgroundColor3 = Color3.fromRGB(255, 80, 80)
CloseButton.BackgroundTransparency = 0.3
CloseButton.BorderSizePixel = 0
CloseButton.Text = "×"
CloseButton.Font = Enum.Font.GothamBold
CloseButton.TextSize = 22
CloseButton.TextColor3 = Color3.fromRGB(255, 255, 255)
CloseButton.Parent = TopBar

local closeCorner = Instance.new("UICorner")
closeCorner.CornerRadius = UDim.new(0, 10)
closeCorner.Parent = CloseButton

local closeGrad = Instance.new("UIGradient")
closeGrad.Rotation = 45
closeGrad.Color = ColorSequence.new{
    ColorSequenceKeypoint.new(0, Color3.fromRGB(255, 100, 100)),
    ColorSequenceKeypoint.new(1, Color3.fromRGB(255, 60, 60))
}
closeGrad.Parent = CloseButton

local MinimizeButton = Instance.new("TextButton")
MinimizeButton.Size = UDim2.new(0, 35, 0, 35)
MinimizeButton.Position = UDim2.new(1, -87, 0, 12)
MinimizeButton.BackgroundColor3 = Color3.fromRGB(255, 200, 80)
MinimizeButton.BackgroundTransparency = 0.3
MinimizeButton.BorderSizePixel = 0
MinimizeButton.Text = "−"
MinimizeButton.Font = Enum.Font.GothamBold
MinimizeButton.TextSize = 22
MinimizeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
MinimizeButton.Parent = TopBar

local minimizeCorner = Instance.new("UICorner")
minimizeCorner.CornerRadius = UDim.new(0, 10)
minimizeCorner.Parent = MinimizeButton

local minimizeGrad = Instance.new("UIGradient")
minimizeGrad.Rotation = 45
minimizeGrad.Color = ColorSequence.new{
    ColorSequenceKeypoint.new(0, Color3.fromRGB(255, 220, 100)),
    ColorSequenceKeypoint.new(1, Color3.fromRGB(255, 180, 80))
}
minimizeGrad.Parent = MinimizeButton

local TitleLabel = Instance.new("TextLabel")
TitleLabel.Text = "NextGEN"
TitleLabel.Font = Enum.Font.GothamBold
TitleLabel.TextSize = 32
TitleLabel.TextColor3 = CONFIG.COLORS.PRIMARY
TitleLabel.BackgroundTransparency = 1
TitleLabel.Position = UDim2.new(0, 30, 0, 10)
TitleLabel.Size = UDim2.new(0, 200, 0, 40)
TitleLabel.Parent = TopBar

createGlowEffect(TitleLabel, CONFIG.COLORS.PRIMARY, 0.6)

-- Tabs Container
local TabsContainer = Instance.new("Frame")
TabsContainer.Size = UDim2.new(1, 0, 0, 50)
TabsContainer.Position = UDim2.new(0, 0, 0, 60)
TabsContainer.BackgroundTransparency = 1
TabsContainer.Parent = MainContainer

local TabNames = {"Dashboard", "Player", "Tools", "Settings", "Info", "Scripts"}
local tabButtons = {}
local tabContents = {}

local function setActiveTab(selectedName)
    for name, frame in pairs(tabContents) do
        frame.Visible = (name == selectedName)
    end
    for name, button in pairs(tabButtons) do
        if name == selectedName then
            button.BackgroundColor3 = CONFIG.COLORS.PRIMARY
            button.TextColor3 = Color3.new(1,1,1)
        else
            button.BackgroundColor3 = CONFIG.COLORS.BACKGROUND_LIGHT
            button.TextColor3 = CONFIG.COLORS.TEXT_PRIMARY
        end
    end
end

-- Create tab buttons and tab content frames
for i, tabName in ipairs(TabNames) do
    local btn = Instance.new("TextButton")
    btn.Name = tabName .. "TabButton"
    btn.Text = tabName
    btn.Font = Enum.Font.GothamBold
    btn.TextSize = 20
    btn.BackgroundColor3 = CONFIG.COLORS.BACKGROUND_LIGHT
    btn.TextColor3 = CONFIG.COLORS.TEXT_PRIMARY
    btn.BorderSizePixel = 0
    btn.Size = UDim2.new(0, 140, 1, 0)
    btn.Position = UDim2.new(0, (i-1)*140, 0, 0)
    btn.Parent = TabsContainer
    tabButtons[tabName] = btn

    local content = Instance.new("Frame")
    content.Name = tabName .. "TabContent"
    content.Size = UDim2.new(1, 0, 1, -110)
    content.Position = UDim2.new(0, 0, 0, 110)
    content.BackgroundColor3 = CONFIG.COLORS.BACKGROUND_MEDIUM
    content.BorderSizePixel = 0
    content.Visible = false
    content.Parent = MainContainer
    tabContents[tabName] = content

    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0, 10)
    corner.Parent = content
end

-- Activate default tab
setActiveTab("Dashboard")

for tabName, button in pairs(tabButtons) do
    button.MouseButton1Click:Connect(function()
        setActiveTab(tabName)
    end)
end

-- Close and Minimize buttons functionality
CloseButton.MouseButton1Click:Connect(function()
    ScreenGui.Enabled = false
end)
MinimizeButton.MouseButton1Click:Connect(function()
    MainContainer.Visible = not MainContainer.Visible
end)

-- === DASHBOARD TAB (example content) ===
do
    local dashboard = tabContents.Dashboard
    local lbl = Instance.new("TextLabel")
    lbl.Text = "Welcome to NextGEN!"
    lbl.Font = Enum.Font.GothamBold
    lbl.TextSize = 30
    lbl.TextColor3 = CONFIG.COLORS.PRIMARY
    lbl.BackgroundTransparency = 1
    lbl.Size = UDim2.new(1, 0, 0, 50)
    lbl.Position = UDim2.new(0, 0, 0, 20)
    lbl.Parent = dashboard
end

-- === PLAYER TAB (example content) ===
do
    local playerTab = tabContents.Player
    local lbl = Instance.new("TextLabel")
    lbl.Text = "Player Info goes here"
    lbl.Font = Enum.Font.Gotham
    lbl.TextSize = 24
    lbl.TextColor3 = CONFIG.COLORS.TEXT_PRIMARY
    lbl.BackgroundTransparency = 1
    lbl.Size = UDim2.new(1, 0, 0, 40)
    lbl.Position = UDim2.new(0, 10, 0, 10)
    lbl.Parent = playerTab
end

-- === TOOLS TAB (example content) ===
do
    local tools = tabContents.Tools
    local lbl = Instance.new("TextLabel")
    lbl.Text = "Tools will be added here"
    lbl.Font = Enum.Font.Gotham
    lbl.TextSize = 24
    lbl.TextColor3 = CONFIG.COLORS.TEXT_PRIMARY
    lbl.BackgroundTransparency = 1
    lbl.Size = UDim2.new(1, 0, 0, 40)
    lbl.Position = UDim2.new(0, 10, 0, 10)
    lbl.Parent = tools
end

-- === SETTINGS TAB (example content) ===
do
    local settings = tabContents.Settings
    local lbl = Instance.new("TextLabel")
    lbl.Text = "Settings will be here"
    lbl.Font = Enum.Font.Gotham
    lbl.TextSize = 24
    lbl.TextColor3 = CONFIG.COLORS.TEXT_PRIMARY
    lbl.BackgroundTransparency = 1
    lbl.Size = UDim2.new(1, 0, 0, 40)
    lbl.Position = UDim2.new(0, 10, 0, 10)
    lbl.Parent = settings
end

-- === INFO TAB (example content) ===
do
    local info = tabContents.Info
    local lbl = Instance.new("TextLabel")
    lbl.Text = "Information and Credits"
    lbl.Font = Enum.Font.Gotham
    lbl.TextSize = 24
    lbl.TextColor3 = CONFIG.COLORS.TEXT_PRIMARY
    lbl.BackgroundTransparency = 1
    lbl.Size = UDim2.new(1, 0, 0, 40)
    lbl.Position = UDim2.new(0, 10, 0, 10)
    lbl.Parent = info
end

-- === SCRIPTS TAB with Stat Changer UI ===
do
    local scriptsTab = tabContents.Scripts

    -- Stat Changer UI function
    local function createStatChanger(parent)
        local container = Instance.new("Frame")
        container.Size = UDim2.new(1, -20, 0, 150)
        container.Position = UDim2.new(0, 10, 0, 10)
        container.BackgroundColor3 = CONFIG.COLORS.BACKGROUND_MEDIUM
        container.BorderSizePixel = 0
        container.Parent = parent

        local title = Instance.new("TextLabel")
        title.Text = "Stat Changer"
        title.Font = Enum.Font.GothamBold
        title.TextSize = 22
        title.TextColor3 = CONFIG.COLORS.PRIMARY
        title.BackgroundTransparency = 1
        title.Size = UDim2.new(1, 0, 0, 30)
        title.Parent = container

        local info = Instance.new("TextLabel")
        info.Text = "Modify any numeric stats on your player (works for most games)."
        info.Font = Enum.Font.Gotham
        info.TextSize = 14
        info.TextColor3 = CONFIG.COLORS.SECONDARY
        info.BackgroundTransparency = 1
        info.Size = UDim2.new(1, 0, 0, 40)
        info.Position = UDim2.new(0, 0, 0, 30)
        info.TextWrapped = true
        info.Parent = container

        local statInput = Instance.new("TextBox")
        statInput.PlaceholderText = "Enter Stat Name (case-sensitive)"
        statInput.Size = UDim2.new(0.5, 0, 0, 30)
        statInput.Position = UDim2.new(0, 10, 0, 75)
        statInput.BackgroundColor3 = CONFIG.COLORS.BACKGROUND_LIGHT
        statInput.TextColor3 = CONFIG.COLORS.TEXT_PRIMARY
        statInput.ClearTextOnFocus = false
        statInput.Parent = container

        local valueInput = Instance.new("TextBox")
        valueInput.PlaceholderText = "Enter New Value (number)"
        valueInput.Size = UDim2.new(0.3, 0, 0, 30)
        valueInput.Position = UDim2.new(0.55, 10, 0, 75)
        valueInput.BackgroundColor3 = CONFIG.COLORS.BACKGROUND_LIGHT
        valueInput.TextColor3 = CONFIG.COLORS.TEXT_PRIMARY
        valueInput.ClearTextOnFocus = false
        valueInput.Parent = container

        local applyBtn = Instance.new("TextButton")
        applyBtn.Text = "Apply"
        applyBtn.Font = Enum.Font.GothamBold
        applyBtn.TextSize = 18
        applyBtn.Size = UDim2.new(0.15, 0, 0, 30)
        applyBtn.Position = UDim2.new(0.87, 0, 0, 75)
        applyBtn.BackgroundColor3 = CONFIG.COLORS.PRIMARY
        applyBtn.TextColor3 = Color3.new(1,1,1)
        applyBtn.Parent = container

        local function findStat(statName)
            local p = Players.LocalPlayer
            -- Try leaderstats first
            if p:FindFirstChild("leaderstats") then
                local stat = p.leaderstats:FindFirstChild(statName)
                if stat and stat:IsA("NumberValue") then return stat end
            end
            -- Try direct child of player
            local stat = p:FindFirstChild(statName)
            if stat and stat:IsA("NumberValue") then return stat end
            -- Try humanoid stats for WalkSpeed, JumpPower, Health
            if p.Character then
                local humanoid = p.Character:FindFirstChildWhichIsA("Humanoid")
                if humanoid then
                    -- NumberValue inside humanoid
                    local statInHumanoid = humanoid:FindFirstChild(statName)
                    if statInHumanoid and statInHumanoid:IsA("NumberValue") then
                        return statInHumanoid
                    end
                    -- Humanoid properties (WalkSpeed, JumpPower, Health)
                    if statName == "WalkSpeed" or statName == "JumpPower" or statName == "Health" then
                        return humanoid
                    end
                end
            end
            return nil
        end

        applyBtn.MouseButton1Click:Connect(function()
            local statName = statInput.Text
            local val = tonumber(valueInput.Text)
            if not statName or statName == "" then
                warn("Please enter a stat name.")
                return
            end
            if not val then
                warn("Please enter a valid number value.")
                return
            end

            local statObj = findStat(statName)
            if statObj then
                if statObj:IsA("NumberValue") then
                    statObj.Value = val
                    print("Changed " .. statName .. " to " .. val)
                elseif statObj:IsA("Humanoid") then
                    if statName == "WalkSpeed" then
                        statObj.WalkSpeed = val
                        print("Changed WalkSpeed to " .. val)
                    elseif statName == "JumpPower" then
                        statObj.JumpPower = val
                        print("Changed JumpPower to " .. val)
                    elseif statName == "Health" then
                        statObj.Health = val
                        print("Changed Health to " .. val)
                    else
                        warn("Unsupported humanoid stat: " .. statName)
                    end
                else
                    warn("Stat found but unsupported type.")
                end
            else
                warn("Stat not found: " .. statName)
            end
        end)
    end

    createStatChanger(scriptsTab)
end

-- === FINAL LOADING & TRANSITION ===

-- Animate loading screen fade-in and fade-out
spawn(function()
    -- Flash diamond twice
    for _=1,2 do
        flashDiamond()
        wait(0.5)
    end

    -- Fade out loading screen
    local tweenOut = TweenService:Create(loadingScreen, TweenInfo.new(1, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {Enabled = false})
    tweenOut:Play()
    tweenOut.Completed:Wait()

    loadingScreen:Destroy()

    -- Show main UI
    ScreenGui.Enabled = true
    TweenService:Create(MainContainer, TweenInfo.new(0.7, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {BackgroundTransparency = 0}):Play()
    MainContainer.Position = UDim2.new(0.5, 0, 0.5, 0) -- move up nicely
end)
